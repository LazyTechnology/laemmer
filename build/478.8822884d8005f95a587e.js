"use strict";(self.webpackChunkpayload_nextjs_server=self.webpackChunkpayload_nextjs_server||[]).push([[478],{19410:(e,a,t)=>{t.d(a,{Z:()=>o});var l=t(67294);t(42926);const n=()=>l.createElement("svg",{className:"icon icon--copy",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 25"},l.createElement("rect",{x:"6.5",y:"10",width:"8",height:"8",className:"stroke"}),l.createElement("path",{d:"M10 9.98438V6.5H18V14.5H14",className:"stroke"}));var r=t(70579);t(28362);const o=({value:e,defaultMessage:a="copy",successMessage:t="copied"})=>{const o=(0,l.useRef)(null),[i,s]=(0,l.useState)(!1),[c,d]=(0,l.useState)(!1);return(0,l.useEffect)((()=>{i&&!c&&setTimeout((()=>{s(!1)}),1500)}),[i,c]),e?l.createElement("button",{onMouseEnter:()=>{d(!0),s(!1)},onMouseLeave:()=>{d(!1),s(!1)},type:"button",className:"copy-to-clipboard",onClick:()=>{o&&o.current&&(o.current.select(),o.current.setSelectionRange(0,e.length+1),document.execCommand("copy"),s(!0))}},l.createElement(n,null),l.createElement(r.Z,null,i&&t,!i&&a),l.createElement("textarea",{readOnly:!0,value:e,ref:o})):null}},29580:(e,a,t)=>{t.d(a,{Z:()=>v});var l=t(67294),n=t(68133),r=t(73559),o=t(77329),i=t(9980),s=t(19410),c=t(55976);t(85228);const d="file-meta",u=e=>{const{filename:a,filesize:t,width:n,height:r,mimeType:o,staticURL:u,url:m}=e,{serverURL:p}=(0,i.Z)(),v=m||`${p}${u}/${a}`;return l.createElement("div",{className:d},l.createElement("div",{className:"file-meta__url"},l.createElement("a",{href:v,target:"_blank",rel:"noopener noreferrer"},a),l.createElement(s.Z,{value:v,defaultMessage:"Copy URL"})),l.createElement("div",{className:"file-meta__size-type"},(0,c.Z)(t),n&&r&&l.createElement(l.Fragment,null," - ",n,"x",r),o&&l.createElement(l.Fragment,null," - ",o)))};var m=t(65821);t(90516);const p="file-details",v=e=>{var a;const{doc:t,collection:i,handleRemove:s}=e,{upload:{staticURL:c}}=i,{filename:d,filesize:v,width:h,height:f,mimeType:E,sizes:g,url:y}=t,[b,w]=(0,l.useState)(!1),Z=g&&(null===(a=Object.keys(g))||void 0===a?void 0:a.length)>0;return l.createElement("div",{className:p},l.createElement("header",null,l.createElement(r.Z,{doc:t,collection:i}),l.createElement("div",{className:"file-details__main-detail"},l.createElement(u,{staticURL:c,filename:d,filesize:v,width:h,height:f,mimeType:E,url:y}),Z&&l.createElement(o.Z,{className:"file-details__toggle-more-info"+(b?" open":""),buttonStyle:"none",onClick:()=>w(!b)},!b&&l.createElement(l.Fragment,null,"More info",l.createElement(m.Z,null)),b&&l.createElement(l.Fragment,null,"Less info",l.createElement(m.Z,null)))),s&&l.createElement(o.Z,{icon:"x",round:!0,buttonStyle:"icon-label",iconStyle:"with-border",onClick:s,className:"file-details__remove"})),Z&&l.createElement(n.Z,{className:"file-details__more-info",height:b?"auto":0},l.createElement("ul",{className:"file-details__sizes"},Object.entries(g).map((([e,a])=>(null==a?void 0:a.filename)?l.createElement("li",{key:e},l.createElement("div",{className:"file-details__size-label"},e),l.createElement(u,{...a,mimeType:E,staticURL:c})):null)))))}},77070:(e,a,t)=>{t.d(a,{Z:()=>r});var l=t(67294),n=t(12049);t(14120);const r=e=>{const{description:a,value:t}=e;if((0,n.isComponent)(a)){const e=a;return l.createElement(e,{value:t})}return a?l.createElement("div",{className:"field-description"},"function"==typeof a?a({value:t}):a):null}},12049:function(e,a,t){var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(a,"__esModule",{value:!0}),a.isComponent=void 0;const n=l(t(67294));a.isComponent=function(e){return n.default.isValidElement(e)}},60161:(e,a,t)=>{t.d(a,{S:()=>i,p:()=>s});var l=t(67294),n=t(80727);const r=(0,l.createContext)(!1),{Provider:o}=r,i=({children:e,allow:a})=>{const{breakpoints:{m:t}}=(0,n.useWindowInfo)();return l.createElement(o,{value:a&&!t},e)},s=()=>(0,l.useContext)(r)},41417:(e,a,t)=>{t.d(a,{Z:()=>o});var l=t(67294),n=t(60161);t(23317);const r="field-type-gutter",o=({children:e,variant:a="left",verticalAlignment:t="sticky",className:o,dragHandleProps:i={}})=>{const s=(0,n.p)(),c=[r,`${r}--${a}`,`${r}--v-align-${t}`,s&&`${r}--negative-gutter`,o&&o].filter(Boolean).join(" ");return l.createElement("div",{className:c,...i},l.createElement("div",{className:`${r}__content-container`},l.createElement("div",{className:`${r}__content`},e)))}},61439:(e,a,t)=>{t.d(a,{Z:()=>d});var l=t(67294),n=t(2143);const r=({root:e=null,rootMargin:a="0px",threshold:t=0}={})=>{const[n,r]=(0,l.useState)(),[o,i]=(0,l.useState)(null),s=(0,l.useRef)(new window.IntersectionObserver((([e])=>r(e)),{root:e,rootMargin:a,threshold:t}));return(0,l.useEffect)((()=>{const{current:e}=s;return e.disconnect(),o&&e.observe(o),()=>e.disconnect()}),[o]),[i,n]};var o=t(83780),i=t(9684);const s="render-fields",c={rootMargin:"1000px"},d=e=>{var a;const{fieldSchema:t,fieldTypes:d,filter:u,permissions:m,readOnly:p,className:v}=e,[h,f]=(0,l.useState)(!1),[E,g]=r(c),y=(0,i.T)(),b=Boolean(null==g?void 0:g.isIntersecting),w=(null===(a=null==g?void 0:g.boundingClientRect)||void 0===a?void 0:a.top)<0,Z=b||w;(0,l.useEffect)((()=>{Z&&!h&&f(!0)}),[Z,h]);const N=[s,v].filter(Boolean).join(" ");return t?l.createElement("div",{ref:E,className:N},h&&t.map(((e,a)=>{var t,r,i,s,c,v,h,f;const E=(0,o.fieldIsPresentationalOnly)(e);let g=d[e.type];if(E||!(null==e?void 0:e.hidden)&&!0!==(null===(t=null==e?void 0:e.admin)||void 0===t?void 0:t.disabled)){if(u&&"function"==typeof u&&u(e)||!u){if(E)return l.createElement(g,{...e,key:a});(null===(r=null==e?void 0:e.admin)||void 0===r?void 0:r.hidden)&&(g=d.hidden);const t=(0,o.fieldAffectsData)(e),u=t?null==m?void 0:m[e.name]:m;let{admin:{readOnly:b}={}}=e;if(p&&!1!==b&&(b=!0),t&&!1!==(null===(s=null===(i=null==m?void 0:m[null==e?void 0:e.name])||void 0===i?void 0:i.read)||void 0===s?void 0:s.permission)||!t)return t&&!1===(null===(v=null===(c=null==m?void 0:m[null==e?void 0:e.name])||void 0===c?void 0:c[y])||void 0===v?void 0:v.permission)&&(b=!0),g?l.createElement(n.Z,{key:a,CustomComponent:null===(f=null===(h=null==e?void 0:e.admin)||void 0===h?void 0:h.components)||void 0===f?void 0:f.Field,DefaultComponent:g,componentProps:{...e,path:e.path||(t?e.name:void 0),fieldTypes:d,admin:{...e.admin||{},readOnly:b},permissions:u}}):l.createElement("div",{className:"missing-field",key:a},"No matched field found for"," ",'"',e.label,'"')}return null}return null}))):null}},75212:(e,a,t)=>{t.d(a,{Z:()=>m});var l=t(67294),n=t(48170),r=t(90546),o=t.n(r),i=t(90666),s=t(35193),c=t(26128),d=t(77070);t(4198);const u="checkbox",m=o()((e=>{const{name:a,path:t,validate:r=s.checkbox,label:o,onChange:m,disableFormData:p,required:v,admin:{readOnly:h,style:f,className:E,width:g,description:y,condition:b}={}}=e,w=t||a,Z=(0,l.useCallback)(((e,a)=>r(e,{...a,required:v})),[r,v]),{value:N,showError:C,errorMessage:$,setValue:_}=(0,n.Z)({path:w,validate:Z,disableFormData:p,condition:b});return l.createElement("div",{className:["field-type",u,C&&"error",E,N&&`${u}--checked`,h&&`${u}--read-only`].filter(Boolean).join(" "),style:{...f,width:g}},l.createElement("div",{className:`${u}__error-wrap`},l.createElement(i.Z,{showError:C,message:$})),l.createElement("input",{type:"checkbox",name:w,id:w,checked:Boolean(N),readOnly:!0}),l.createElement("button",{type:"button",onClick:h?void 0:()=>{_(!N),"function"==typeof m&&m(!N)}},l.createElement("span",{className:`${u}__input`},l.createElement(c.Z,null)),l.createElement("span",{className:`${u}__label`},o)),l.createElement(d.Z,{value:N,description:y}))}))},74007:(e,a,t)=>{t.d(a,{Z:()=>s});var l=t(67294),n=t(48170),r=t(953),o=t(90666),i=t(64012);t(89013);const s=()=>{const{getField:e}=(0,i.useWatchForm)(),a=e("password"),t=(0,l.useCallback)((e=>e===(null==a?void 0:a.value)||"Passwords do not match."),[a]),{value:s,showError:c,setValue:d,errorMessage:u}=(0,n.Z)({path:"confirm-password",disableFormData:!0,validate:t,enableDebouncedValue:!0}),m=["field-type","confirm-password",c&&"error"].filter(Boolean).join(" ");return l.createElement("div",{className:m},l.createElement(o.Z,{showError:c,message:u}),l.createElement(r.Z,{htmlFor:"confirm-password",label:"Confirm Password",required:!0}),l.createElement("input",{value:s||"",onChange:d,type:"password",autoComplete:"off",id:"confirm-password",name:"confirm-password"}))}},28571:(e,a,t)=>{t.d(a,{Z:()=>u});var l=t(67294),n=t(90546),r=t.n(n),o=t(48170),i=t(953),s=t(90666),c=t(77070),d=t(35193);t(25786);const u=r()((e=>{const{name:a,path:t,required:n,validate:r=d.email,admin:{readOnly:u,style:m,className:p,width:v,placeholder:h,autoComplete:f,description:E,condition:g}={},label:y}=e,b=t||a,w=(0,l.useCallback)(((e,a)=>r(e,{...a,required:n})),[r,n]),Z=(0,o.Z)({path:b,validate:w,enableDebouncedValue:!0,condition:g}),{value:N,showError:C,setValue:$,errorMessage:_}=Z,k=["field-type","email",p,C&&"error",u&&"read-only"].filter(Boolean).join(" ");return l.createElement("div",{className:k,style:{...m,width:v}},l.createElement(s.Z,{showError:C,message:_}),l.createElement(i.Z,{htmlFor:b,label:y,required:n}),l.createElement("input",{value:N||"",onChange:$,disabled:Boolean(u),placeholder:h,type:"email",id:b,name:b,autoComplete:f}),l.createElement(c.Z,{value:N,description:E}))}))},74020:(e,a,t)=>{t.d(a,{Z:()=>o});var l=t(67294),n=t(48170),r=t(90546);const o=t.n(r)()((e=>{const{name:a,path:t,value:r,disableModifyingForm:o=!0}=e,i=t||a,{value:s,setValue:c}=(0,n.Z)({path:i});return(0,l.useEffect)((()=>{void 0!==r&&c(r,o)}),[r,c,o]),l.createElement("input",{type:"hidden",value:s||"",onChange:c,name:i})}))},76067:(e,a,t)=>{t.d(a,{Z:()=>d});var l=t(67294),n=t(48170),r=t(953),o=t(90666),i=t(90546),s=t.n(i),c=t(35193);t(8108);const d=s()((e=>{const{path:a,name:t,required:i,validate:s=c.password,style:d,className:u,width:m,autoComplete:p,label:v}=e,h=a||t,f=(0,l.useCallback)(((e,a)=>s(e,{...a,required:i})),[s,i]),{value:E,showError:g,formProcessing:y,setValue:b,errorMessage:w}=(0,n.Z)({path:h,validate:f,enableDebouncedValue:!0}),Z=["field-type","password",u,g&&"error"].filter(Boolean).join(" ");return l.createElement("div",{className:Z,style:{...d,width:m}},l.createElement(o.Z,{showError:g,message:w}),l.createElement(r.Z,{htmlFor:h,label:v,required:i}),l.createElement("input",{value:E||"",onChange:b,disabled:y,type:"password",autoComplete:p,id:h,name:h}))}))},41884:(e,a,t)=>{t.d(a,{Z:()=>_});var l=t(67294),n=t(10251),r=t.n(n),o=t(9034),i=t.n(o),s=t(9980),c=t(28630),d=t(90546),u=t.n(d),m=t(78870),p=t(48170),v=t(953),h=t(90666),f=t(77070),E=t(35193),g=t(64012);const y=e=>e.reduce(((e,a)=>a.options?[...e,...y(a.options)]:[...e,a.value]),[]),b=e=>e.sort(((e,a)=>{var t,l;return"function"==typeof(null===(t=null==e?void 0:e.label)||void 0===t?void 0:t.localeCompare)&&"function"==typeof(null===(l=null==a?void 0:a.label)||void 0===l?void 0:l.localeCompare)?e.label.localeCompare(a.label):0})),w=(e,a)=>{switch(a.type){case"CLEAR":return a.required?[]:[{value:"null",label:"None"}];case"ADD":{const{hasMultipleRelations:t,collection:l,relation:n,data:r,sort:o}=a,i=l.admin.useAsTitle||"id",s=y(e);if(!t){const a=[...e,...r.docs.reduce(((e,a)=>-1===s.indexOf(a.id)?(s.push(a.id),[...e,{label:a[i]||`Untitled - ID: ${a.id}`,value:a.id}]):e),[])];return o?b(a):a}const c=[...e],d=c.find((e=>e.label===l.labels.plural)),u=r.docs.reduce(((e,a)=>-1===s.indexOf(a.id)?(s.push(a.id),[...e,{label:a[i]||`Untitled - ID: ${a.id}`,relationTo:n,value:a.id}]):e),[]);if(d){const e=[...d.options,...u];d.options=o?b(e):e}else c.push({label:l.labels.plural,options:o?b(u):u,value:void 0});return c}default:return e}},Z=({hasMany:e,relationTo:a,value:t})=>{const l=Array.isArray(a),n={},r=(e,a)=>{("string"==typeof a&&"null"!==a||"number"==typeof a)&&"string"==typeof e&&(void 0===n[e]&&(n[e]=[]),n[e].push(a))};if(e&&Array.isArray(t))t.forEach((e=>{l?r(e.relationTo,e.value):r(a,e)}));else if(l){const e=t;r(null==e?void 0:e.relationTo,null==e?void 0:e.value)}else r(a,t);return n};var N=t(45074),C=t(10175);t(84414);const $="relationship",_=u()((e=>{const{relationTo:a,validate:t=E.relationship,path:n,name:o,required:d,label:u,hasMany:y,filterOptions:b,admin:{readOnly:_,style:k,className:S,width:M,description:x,condition:T}={}}=e,{serverURL:q,routes:{api:O},collections:L}=(0,s.Z)(),{id:D}=(0,N.x5)(),{user:P}=(0,c.a)(),{getData:F,getSiblingData:j}=(0,g.useWatchForm)(),B=(0,g.useFormProcessing)(),A=Array.isArray(a),[V,R]=(0,l.useReducer)(w,d||y?[]:[{value:null,label:"None"}]),[U,z]=(0,l.useState)(-1),[I,W]=(0,l.useState)(1),[H,G]=(0,l.useState)(""),[K,Q]=(0,l.useState)(),[Y,J]=(0,l.useState)(!1),[X,ee]=(0,l.useState)(""),ae=(0,l.useCallback)(((e,a)=>t(e,{...a,required:d})),[t,d]),{value:te,showError:le,errorMessage:ne,setValue:re,initialValue:oe}=(0,p.Z)({path:n||o,validate:ae,condition:T}),ie=(0,l.useCallback)((async({lastFullyLoadedRelation:e,lastLoadedPage:t,search:l,value:n,sort:r})=>{let o=void 0!==t?t:1;const s=void 0!==e?e:-1,c=Array.isArray(a)?a:[a],d=-1===s?c:c.slice(s+1);let u=0;const m=Z({hasMany:y,relationTo:a,value:n});H||d.reduce((async(e,a)=>{var t;if(await e,u<10){const e=L.find((e=>e.slug===a)),n=(null===(t=null==e?void 0:e.admin)||void 0===t?void 0:t.useAsTitle)||"id",s={where:{and:[{id:{not_in:m[a]}}]},limit:10,page:o,sort:n,depth:0};l&&s.where.and.push({[n]:{like:l}}),(null==K?void 0:K[a])&&s.where.and.push(K[a]);const d=await fetch(`${q}${O}/${a}?${i().stringify(s)}`);if(d.ok){const t=await d.json();t.docs.length>0&&(u+=t.docs.length,R({type:"ADD",data:t,relation:a,hasMultipleRelations:A,collection:e,sort:r}),W(t.page),t.nextPage||(z(c.indexOf(a)),c.indexOf(a)+1<c.length&&(o=1)))}else G("An error has occurred.")}}),Promise.resolve())}),[a,y,H,L,K,q,O,A]),se=(0,l.useCallback)((()=>{if(te){if(y)return Array.isArray(te)?te.map((e=>{if(A){let a;return V.forEach((t=>{t.options&&t.options.some((t=>(null==t?void 0:t.value)===e.value&&(a=t,!0)))})),a}return V.find((a=>a.value===e))})):void 0;if(A){let e;const a=te;return V.forEach((t=>{(null==t?void 0:t.options)&&t.options.some((t=>(null==t?void 0:t.value)===a.value&&(e=t,!0)))})),e}return V.find((e=>e.value===te))}}),[y,A,te,V]),ce=((e,a)=>{const t=(0,l.useRef)();return(0,l.useCallback)(((...l)=>{clearTimeout(t.current),t.current=setTimeout((()=>{clearTimeout(t.current),e(...l)}),a)}),[e,a])})(((e,a)=>{ie({search:e,value:a,sort:!0}),ee(e)}),[ie]);(0,l.useEffect)((()=>{if(oe&&!Y){const e=Z({hasMany:y,relationTo:a,value:oe});Object.entries(e).reduce((async(e,[a,t])=>{if(await e,t.length>0){const e={where:{id:{in:t}},depth:0,limit:t.length};if(!H){const t=await fetch(`${q}${O}/${a}?${i().stringify(e)}`);if(t.ok){const e=await t.json(),l=L.find((e=>e.slug===a));R({type:"ADD",data:e,relation:a,hasMultipleRelations:A,collection:l,sort:!0})}else console.error(`There was a problem loading relationships to related collection ${a}.`)}}}),Promise.resolve()),J(!0)}}),[y,A,a,oe,Y,H,L,O,q]),(0,l.useEffect)((()=>{if(!b)return;const e=(0,C.w)(b,{id:D,data:F(),relationTo:a,siblingData:j(n),user:P});r()(e,K)||Q(e)}),[a,b,K,D,F,j,n,P]),(0,l.useEffect)((()=>{!K&&b||(J(!1),ie({value:oe}))}),[oe,ie,K,b]);const de=["field-type",$,S,le&&"error",H&&"error-loading",_&&`${$}--read-only`].filter(Boolean).join(" "),ue=se()||te;return"null"===(null==ue?void 0:ue.value)&&(ue.value=null),l.createElement("div",{className:de,style:{...k,width:M}},l.createElement(h.Z,{showError:le,message:ne}),l.createElement(v.Z,{htmlFor:n,label:u,required:d}),!H&&l.createElement(m.Z,{isDisabled:_,onInputChange:e=>{return t=te,void(X!==(a=e)&&ce(a,t));var a,t},onChange:_?void 0:e=>{re(y?e?e.map((e=>A?{relationTo:e.relationTo,value:e.value}:e.value)):null:A?{relationTo:e.relationTo,value:e.value}:e.value)},onMenuScrollToBottom:()=>{ie({lastFullyLoadedRelation:U,lastLoadedPage:I+1,search:X,value:oe,sort:!1})},value:ue,showError:le,disabled:B,options:V,isMulti:y}),H&&l.createElement("div",{className:`${$}__error-loading`},H),l.createElement(f.Z,{value:te,description:x}))}))},67670:(e,a,t)=>{t.d(a,{Z:()=>v});var l=t(67294),n=t(90546),r=t.n(n),o=t(48170),i=t(35193),s=t(953),c=t(90666),d=t(77070),u=t(78870);t(33665);const m=e=>{const{showError:a,errorMessage:t,readOnly:n,path:r,label:o,required:i,value:m,onChange:p,description:v,style:h,className:f,width:E,options:g,hasMany:y}=e,b=["field-type","select",f,a&&"error",n&&"read-only"].filter(Boolean).join(" ");let w;return w=y&&Array.isArray(m)?m.map((e=>g.find((a=>a.value===e)))):g.find((e=>e.value===m)),l.createElement("div",{className:b,style:{...h,width:E}},l.createElement(c.Z,{showError:a,message:t}),l.createElement(s.Z,{htmlFor:r,label:o,required:i}),l.createElement(u.Z,{onChange:p,value:w,showError:a,isDisabled:n,options:g,isMulti:y}),l.createElement(d.Z,{value:m,description:v}))},p=e=>e.map((e=>"object"!=typeof e||!e.value&&""!==e.value?{label:e,value:e}:e)),v=r()((e=>{const{path:a,name:t,validate:n=i.select,label:r,options:s,hasMany:c,required:d,admin:{readOnly:u,style:v,className:h,width:f,description:E,condition:g}={}}=e,y=a||t,[b,w]=(0,l.useState)(p(s));(0,l.useEffect)((()=>{w(p(s))}),[s]);const Z=(0,l.useCallback)(((e,a)=>n(e,{...a,options:b,hasMany:c,required:d})),[n,d,c,b]),{value:N,showError:C,setValue:$,errorMessage:_}=(0,o.Z)({path:y,validate:Z,condition:g}),k=(0,l.useCallback)((e=>{if(!u){let a;a=c?Array.isArray(e)?e.map((e=>e.value)):[]:e.value,$(a)}}),[u,c,$]);return l.createElement(m,{path:y,onChange:k,value:N,name:t,options:b,label:r,showError:C,errorMessage:_,required:d,description:E,style:v,className:h,width:f,hasMany:c})}))},10175:(e,a,t)=>{t.d(a,{w:()=>l});const l=(e,a)=>{const{relationTo:t}=a,l=Array.isArray(t)?t:[t],n={};return void 0!==e&&l.forEach((t=>{n[t]="function"==typeof e?e(a):e})),n}},72570:(e,a,t)=>{t.d(a,{Z:()=>Ne});var l=t(67294),n=t(40829);const r=(0,l.lazy)((()=>Promise.all([t.e(532),t.e(16)]).then(t.bind(t,29016)))),o=e=>l.createElement(l.Suspense,{fallback:l.createElement(n.Z,null)},l.createElement(r,{...e}));var i=t(28571),s=t(74020),c=t(48170),d=t(90546),u=t.n(d),m=t(35193),p=t(953),v=t(90666),h=t(77070);t(9226);const f=e=>{const{showError:a,errorMessage:t,placeholder:n,readOnly:r,path:o,label:i,required:s,value:c,onChange:d,description:u,style:m,className:f,width:E}=e,g=["field-type","text",f,a&&"error",r&&"read-only"].filter(Boolean).join(" ");return l.createElement("div",{className:g,style:{...m,width:E}},l.createElement(v.Z,{showError:a,message:t}),l.createElement(p.Z,{htmlFor:o,label:i,required:s}),l.createElement("input",{value:c||"",onChange:d,disabled:r,placeholder:n,type:"text",id:o,name:o}),l.createElement(h.Z,{value:c,description:u}))},E=u()((e=>{const{path:a,name:t,required:n,validate:r=m.text,label:o,minLength:i,maxLength:s,admin:{placeholder:d,readOnly:u,style:p,className:v,width:h,description:E,condition:g}={}}=e,y=a||t,b=(0,l.useCallback)(((e,a)=>r(e,{...a,minLength:i,maxLength:s,required:n})),[r,i,s,n]),w=(0,c.Z)({path:y,validate:b,enableDebouncedValue:!0,condition:g}),{value:Z,showError:N,setValue:C,errorMessage:$}=w;return l.createElement(f,{path:y,name:t,onChange:e=>{C(e.target.value)},showError:N,errorMessage:$,required:n,label:o,value:Z,placeholder:d,readOnly:u,style:p,className:v,width:h,description:E})}));var g=t(82626);t(21695);const y="date-time-field",b=u()((e=>{const{path:a,name:t,required:n,validate:r=m.date,label:o,admin:{placeholder:i,readOnly:s,style:d,className:u,width:f,date:E,description:b,condition:w}={}}=e,Z=a||t,N=(0,l.useCallback)(((e,a)=>r(e,{...a,required:n})),[r,n]),{value:C,showError:$,errorMessage:_,setValue:k}=(0,c.Z)({path:Z,validate:N,condition:w}),S=["field-type",y,u,$&&`${y}--has-error`,s&&"read-only"].filter(Boolean).join(" ");return l.createElement("div",{className:S,style:{...d,width:f}},l.createElement("div",{className:`${y}__error-wrap`},l.createElement(v.Z,{showError:$,message:_})),l.createElement(p.Z,{htmlFor:Z,label:o,required:n}),l.createElement("div",{className:`${y}__input-wrapper`},l.createElement(g.Z,{...E,placeholder:i,readOnly:s,onChange:s?void 0:k,value:C})),l.createElement(h.Z,{value:C,description:b}))}));var w=t(76067),Z=t(74007),N=t(41884);t(25536);const C=e=>{const{path:a,required:t,readOnly:n,style:r,className:o,width:i,placeholder:s,description:c,label:d,showError:u,value:m,errorMessage:f,onChange:E,rows:g}=e,y=["field-type","textarea",o,u&&"error",n&&"read-only"].filter(Boolean).join(" ");return l.createElement("div",{className:y,style:{...r,width:i}},l.createElement(v.Z,{showError:u,message:f}),l.createElement(p.Z,{htmlFor:a,label:d,required:t}),l.createElement("textarea",{value:m||"",onChange:E,disabled:n,placeholder:s,id:a,name:a,rows:g}),l.createElement(h.Z,{value:m,description:c}))},$=u()((e=>{const{path:a,name:t,required:n,validate:r=m.textarea,maxLength:o,minLength:i,admin:{readOnly:s,style:d,className:u,width:p,placeholder:v,rows:h,description:f,condition:E}={},label:g}=e,y=a||t,b=(0,l.useCallback)(((e,a)=>r(e,{...a,required:n,maxLength:o,minLength:i})),[r,n,o,i]),{value:w,showError:Z,setValue:N,errorMessage:$}=(0,c.Z)({path:y,validate:b,enableDebouncedValue:!0,condition:E});return l.createElement(C,{path:y,name:t,onChange:e=>{N(e.target.value)},showError:Z,errorMessage:$,required:n,label:g,value:w,placeholder:v,readOnly:s,style:d,className:u,width:p,description:f,rows:h})}));var _=t(67670);t(75712);const k=u()((e=>{const{name:a,path:t,required:n,validate:r=m.number,label:o,max:i,min:s,admin:{readOnly:d,style:u,className:f,width:E,step:g,placeholder:y,description:b,condition:w}={}}=e,Z=t||a,N=(0,l.useCallback)(((e,a)=>r(e,{...a,min:s,max:i,required:n})),[r,s,i,n]),{value:C,showError:$,setValue:_,errorMessage:k}=(0,c.Z)({path:Z,validate:N,enableDebouncedValue:!0,condition:w}),S=(0,l.useCallback)((e=>{const a=parseFloat(e.target.value);Number.isNaN(a)?_(""):_(a)}),[_]),M=["field-type","number",f,$&&"error",d&&"read-only"].filter(Boolean).join(" ");return l.createElement("div",{className:M,style:{...u,width:E}},l.createElement(v.Z,{showError:$,message:k}),l.createElement(p.Z,{htmlFor:Z,label:o,required:n}),l.createElement("input",{value:"number"==typeof C?C:"",onChange:S,disabled:d,placeholder:y,type:"number",id:Z,name:Z,step:g}),l.createElement(h.Z,{value:C,description:b}))}));var S=t(75212);const M=(0,l.lazy)((()=>Promise.all([t.e(532),t.e(388)]).then(t.bind(t,93388)))),x=e=>l.createElement(l.Suspense,{fallback:l.createElement(n.Z,null)},l.createElement(M,{...e}));t(87376);const T="radio-input",q=e=>{const{isSelected:a,option:t,onChange:n,path:r}=e,o=[T,a&&`${T}--is-selected`].filter(Boolean).join(" "),i=`${r}-${t.value}`;return l.createElement("label",{htmlFor:i},l.createElement("div",{className:o},l.createElement("input",{id:i,type:"radio",checked:a,onChange:()=>"function"==typeof n?n(t.value):null}),l.createElement("span",{className:`${T}__styled-radio`}),l.createElement("span",{className:`${T}__label`},t.label)))};var O=t(83780);t(6129);const L="radio-group",D=u()((e=>{const{name:a,path:t,required:n,validate:r=m.radio,label:o,admin:{readOnly:i,layout:s="horizontal",style:d,className:u,width:f,description:E,condition:g}={},options:y}=e,b=t||a,w=(0,l.useCallback)(((e,a)=>r(e,{...a,options:y,required:n})),[r,y,n]),{value:Z,showError:N,errorMessage:C,setValue:$}=(0,c.Z)({path:b,validate:w,condition:g}),_=["field-type",L,u,`${L}--layout-${s}`,N&&"error",i&&`${L}--read-only`].filter(Boolean).join(" ");return l.createElement("div",{className:_,style:{...d,width:f}},l.createElement("div",{className:`${L}__error-wrap`},l.createElement(v.Z,{showError:N,message:C})),l.createElement(p.Z,{htmlFor:b,label:o,required:n}),l.createElement("ul",{className:`${L}--group`},y.map((e=>{let a="";a=(0,O.optionIsObject)(e)?e.value:e;const t=String(a)===String(Z);return l.createElement("li",{key:`${b} - ${a}`},l.createElement(q,{path:b,isSelected:t,option:(0,O.optionIsObject)(e)?e:{label:e,value:e},onChange:i?void 0:$}))}))),l.createElement(h.Z,{value:Z,description:E}))}));t(52879);const P="point",F=u()((e=>{const{name:a,path:t,required:n,validate:r=m.point,label:o,admin:{readOnly:i,style:s,className:d,width:u,step:f,placeholder:E,description:g,condition:y}={}}=e,b=t||a,w=(0,l.useCallback)(((e,a)=>r(e,{...a,required:n})),[r,n]),{value:Z=[null,null],showError:N,setValue:C,errorMessage:$}=(0,c.Z)({path:b,validate:w,enableDebouncedValue:!0,condition:y}),_=(0,l.useCallback)(((e,a)=>{let t=parseFloat(e.target.value);Number.isNaN(t)&&(t=e.target.value);const l=[...Z];l[a]=t,C(l)}),[C,Z]),k=["field-type",P,d,N&&"error",i&&"read-only"].filter(Boolean).join(" ");return l.createElement("div",{className:k,style:{...s,width:u}},l.createElement(v.Z,{showError:N,message:$}),l.createElement("ul",{className:`${P}__wrap`},l.createElement("li",null,l.createElement(p.Z,{htmlFor:`${b}.longitude`,label:`${o} - Longitude`,required:n}),l.createElement("input",{value:Z&&"number"==typeof Z[0]?Z[0]:"",onChange:e=>_(e,0),disabled:i,placeholder:E,type:"number",id:`${b}.longitude`,name:`${b}.longitude`,step:f})),l.createElement("li",null,l.createElement(p.Z,{htmlFor:`${b}.latitude`,label:`${o} - Latitude`,required:n}),l.createElement("input",{value:Z&&"number"==typeof Z[1]?Z[1]:"",onChange:e=>_(e,1),disabled:i,placeholder:E,type:"number",id:`${b}.latitude`,name:`${b}.latitude`,step:f}))),l.createElement(h.Z,{value:Z,description:g}))})),j=(0,l.lazy)((()=>Promise.all([t.e(532),t.e(664),t.e(977)]).then(t.bind(t,36977)))),B=e=>l.createElement(l.Suspense,{fallback:l.createElement(n.Z,null)},l.createElement(j,{...e}));var A=t(61439),V=t(41417),R=t(60161);t(38655);const U="group",z=u()((e=>{const{label:a,fields:t,name:n,path:r,fieldTypes:o,admin:{readOnly:i,style:s,className:c,width:d,hideGutter:u,description:m},permissions:p}=e,v=r||n;return l.createElement("div",{className:["field-type",U,c,!a&&`${U}--no-label`].filter(Boolean).join(" "),style:{...s,width:d}},!u&&l.createElement(V.Z,null),l.createElement("div",{className:`${U}__content-wrapper`},(a||m)&&l.createElement("header",{className:`${U}__header`},a&&l.createElement("h3",{className:`${U}__title`},a),l.createElement(h.Z,{value:null,description:m})),l.createElement("div",{className:`${U}__fields-wrapper`},l.createElement(R.S,{allow:!1},l.createElement(A.Z,{permissions:null==p?void 0:p.fields,readOnly:i,fieldTypes:o,fieldSchema:t.map((e=>({...e,path:`${v}${(0,O.fieldAffectsData)(e)?`.${e.name}`:""}`})))})))))})),I=(0,l.lazy)((()=>Promise.all([t.e(532),t.e(664),t.e(892)]).then(t.bind(t,46892)))),W=e=>l.createElement(l.Suspense,{fallback:l.createElement(n.Z,null)},l.createElement(I,{...e}));t(1745);const H=u()((e=>{const{fields:a,fieldTypes:t,path:n,permissions:r,admin:{readOnly:o,className:i}}=e,s=["field-type","row",i].filter(Boolean).join(" ");return l.createElement(A.Z,{readOnly:o,className:s,permissions:null==r?void 0:r.fields,fieldTypes:t,fieldSchema:a.map((e=>({...e,path:`${n?`${n}.`:""}${(0,O.fieldAffectsData)(e)?e.name:""}`})))})}));var G=t(9980),K=t(71851),Q=t(77329),Y=t(29580),J=t(28630),X=t(39599),ee=t(93313),ae=t(46268),te=t(56054),le=t(28019);t(62805);const ne="add-upload-modal",re=e=>{var a,t;const{collection:n,collection:{admin:{description:r}={}}={},slug:o,fieldTypes:i,setValue:s}=e,{permissions:c}=(0,J.a)(),{serverURL:d,routes:{api:u}}=(0,G.Z)(),{closeAll:m}=(0,K.useModal)(),p=(0,l.useCallback)((e=>{m(),s(e.doc)}),[m,s]),v=[ne].filter(Boolean).join(" "),h=null===(t=null===(a=null==c?void 0:c.collections)||void 0===a?void 0:a[n.slug])||void 0===t?void 0:t.fields;return l.createElement(K.Modal,{className:v,slug:o},l.createElement(X.Z,{width:"wide"},l.createElement(ee.Z,{method:"post",action:`${d}${u}/${n.slug}`,onSuccess:p,disableSuccessStatus:!0,validationOperation:"create"},l.createElement("header",{className:`${ne}__header`},l.createElement("div",null,l.createElement("h1",null,"New"," ",n.labels.singular),l.createElement(ae.Z,null,"Save"),l.createElement(Q.Z,{icon:"x",round:!0,buttonStyle:"icon-label",iconStyle:"with-border",onClick:m})),r&&l.createElement("div",{className:`${ne}__sub-header`},l.createElement(le.Z,{description:r}))),l.createElement(te.Z,{collection:n}),l.createElement(R.S,{allow:!0},l.createElement(A.Z,{permissions:h,readOnly:!1,fieldTypes:i,fieldSchema:n.fields})))))};var oe=t(10251),ie=t.n(oe),se=t(47489),ce=t(21280),de=t(56628),ue=t(27656),me=t(64267),pe=t(10254),ve=t(10175),he=t(45074),fe=t(64012);t(10389);const Ee="select-existing-upload-modal",ge=e=>{var a,t;const{setValue:n,collection:r,collection:{slug:o,admin:{description:i,pagination:{defaultLimit:s}}={}}={},slug:c,path:d,filterOptions:u}=e,{serverURL:m,routes:{api:p}}=(0,G.Z)(),{id:v}=(0,he.x5)(),{user:h}=(0,J.a)(),{getData:f,getSiblingData:E}=(0,fe.useWatchForm)(),{closeAll:g,currentModal:y}=(0,K.useModal)(),[b]=(0,l.useState)((()=>(0,pe.Z)(r))),[w,Z]=(0,l.useState)(s),[N,C]=(0,l.useState)(null),[$,_]=(0,l.useState)(null),[k,S]=(0,l.useState)(null),[M,x]=(0,l.useState)(),T=[Ee].filter(Boolean).join(" "),q=y===c,O=q?`${m}${p}/${o}`:null,[{data:L},{setParams:D}]=(0,se.Z)(O,{});return(0,l.useEffect)((()=>{const e={};k&&(e.page=k),$&&(e.where={and:[$,M]}),N&&(e.sort=N),w&&(e.limit=w),D(e)}),[D,k,N,$,w,M]),(0,l.useEffect)((()=>{if(!u||!q)return;const e=(0,ve.w)(u,{id:v,relationTo:o,data:f(),siblingData:E(d),user:h})[o];ie()(e,M)||x(e)}),[o,u,M,v,f,E,d,h,q]),l.createElement(K.Modal,{className:T,slug:c},q&&l.createElement(X.Z,{width:"wide"},l.createElement("header",{className:`${Ee}__header`},l.createElement("div",null,l.createElement("h1",null," ","Select existing"," ",r.labels.singular),l.createElement(Q.Z,{icon:"x",round:!0,buttonStyle:"icon-label",iconStyle:"with-border",onClick:g})),i&&l.createElement("div",{className:`${Ee}__sub-header`},l.createElement(le.Z,{description:i}))),l.createElement(ce.Z,{collection:{...r,fields:b},enableColumns:!1,enableSort:!0,modifySearchQuery:!1,handleSortChange:C,handleWhereChange:_}),l.createElement(ue.Z,{docs:null==L?void 0:L.docs,collection:r,onCardClick:e=>{n(e),g()}}),l.createElement("div",{className:`${Ee}__page-controls`},l.createElement(de.Z,{limit:L.limit,totalPages:L.totalPages,page:L.page,hasPrevPage:L.hasPrevPage,hasNextPage:L.hasNextPage,prevPage:L.prevPage,nextPage:L.nextPage,numberOfNeighbors:1,onChange:S,disableHistoryChange:!0}),(null==L?void 0:L.totalDocs)>0&&l.createElement(l.Fragment,null,l.createElement("div",{className:`${Ee}__page-info`},L.page,"-",L.totalPages>1?L.limit:L.totalDocs," ","of"," ",L.totalDocs),l.createElement(me.Z,{limits:null===(t=null===(a=null==r?void 0:r.admin)||void 0===a?void 0:a.pagination)||void 0===t?void 0:t.limits,limit:w,modifySearchParams:!1,handleChange:Z})))))};t(40349);const ye="upload",be=e=>{const{path:a,required:t,readOnly:n,style:r,className:o,width:i,description:s,label:c,relationTo:d,fieldTypes:u,value:m,onChange:f,showError:E,serverURL:g="http://localhost:3000",api:y="/api",collection:b,errorMessage:w,filterOptions:Z}=e,{toggle:N}=(0,K.useModal)(),C=`${a}-add`,$=`${a}-select-existing`,[_,k]=(0,l.useState)(void 0),[S,M]=(0,l.useState)(!1),x=["field-type",ye,o,E&&"error",n&&"read-only"].filter(Boolean).join(" ");return(0,l.useEffect)((()=>{if("string"==typeof m&&""!==m){(async()=>{const e=await fetch(`${g}${y}/${d}/${m}`);if(e.ok){const a=await e.json();k(a)}else M(!0),k(void 0)})()}else k(void 0)}),[m,d,y,g]),l.createElement("div",{className:x,style:{...r,width:i}},l.createElement(v.Z,{showError:E,message:w}),l.createElement(p.Z,{htmlFor:a,label:c,required:t}),(null==b?void 0:b.upload)&&l.createElement(l.Fragment,null,_&&!S&&l.createElement(Y.Z,{collection:b,doc:_,handleRemove:()=>{f(null)}}),(!_||S)&&l.createElement("div",{className:`${ye}__wrap`},l.createElement(Q.Z,{buttonStyle:"secondary",onClick:()=>{N(C)}},"Upload new"," ",b.labels.singular),l.createElement(Q.Z,{buttonStyle:"secondary",onClick:()=>{N($)}},"Choose from existing")),l.createElement(re,{collection:b,slug:C,fieldTypes:u,setValue:f}),l.createElement(ge,{collection:b,slug:$,setValue:f,addModalSlug:C,filterOptions:Z,path:a}),l.createElement(h.Z,{value:_,description:s})))},we=u()((e=>{const{collections:a,serverURL:t,routes:{api:n}}=(0,G.Z)(),{path:r,name:o,required:i,admin:{readOnly:s,style:d,className:u,width:p,description:v,condition:h}={},label:f,validate:E=m.upload,relationTo:g,fieldTypes:y,filterOptions:b}=e,w=a.find((e=>e.slug===g)),Z=(0,l.useCallback)(((e,a)=>E(e,{...a,required:i})),[E,i]),N=(0,c.Z)({path:r,validate:Z,condition:h}),{value:C,showError:$,setValue:_,errorMessage:k}=N,S=(0,l.useCallback)((e=>{const a=(null==e?void 0:e.id)||e;_(a)}),[_]);return w.upload?l.createElement(be,{path:r,value:C,onChange:S,description:v,label:f,required:i,showError:$,serverURL:t,api:n,errorMessage:k,readOnly:s,style:d,className:u,width:p,collection:w,fieldTypes:y,name:o,relationTo:g,filterOptions:b}):null})),Ze=u()((e=>{const{admin:{components:{Field:a}}}=e;return a?l.createElement(a,{...e}):null})),Ne={code:o,email:i.Z,hidden:s.Z,text:E,date:b,password:w.Z,confirmPassword:Z.Z,relationship:N.Z,textarea:$,select:_.Z,number:k,checkbox:S.Z,richText:x,point:F,radio:D,blocks:B,group:z,array:W,row:H,upload:we,ui:Ze}},26128:(e,a,t)=>{t.d(a,{Z:()=>n});var l=t(67294);t(65809);const n=()=>l.createElement("svg",{className:"icon icon--check",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 25"},l.createElement("path",{d:"M10.6092 16.0192L17.6477 8.98076",className:"stroke",strokeLinecap:"square",strokeLinejoin:"bevel"}),l.createElement("path",{d:"M7.35229 12.7623L10.6092 16.0192",className:"stroke",strokeLinecap:"square",strokeLinejoin:"bevel"}))},56054:(e,a,t)=>{t.d(a,{Z:()=>u});var l=t(67294),n=t(48170),r=t(77329),o=t(29580),i=t(90666);t(55307);const s="file-field",c=e=>{e.preventDefault(),e.stopPropagation()},d=e=>!(!e&&void 0!==e)||"A file is required.",u=e=>{var a,t;const u=(0,l.useRef)(null),m=(0,l.useRef)(null),[p,v]=(0,l.useState)(!1),[h,f]=(0,l.useState)(!1),[E,g]=(0,l.useState)(0),[y,b]=(0,l.useState)(!1),{data:w={},collection:Z}=e,{filename:N}=w,{value:C,setValue:$,showError:_,errorMessage:k}=(0,n.Z)({path:"file",validate:d}),S=(0,l.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),g((e=>e+1)),e.dataTransfer.items&&e.dataTransfer.items.length>0&&f(!0)}),[]),M=(0,l.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),g((e=>e-1)),E>1||f(!1)}),[E]),x=(0,l.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),f(!1),e.dataTransfer.files&&e.dataTransfer.files.length>0?($(e.dataTransfer.files[0]),f(!1),e.dataTransfer.clearData(),g(0)):f(!1)}),[$]),T=(0,l.useCallback)((()=>{var e,a;v(!1),$((null===(a=null===(e=null==u?void 0:u.current)||void 0===e?void 0:e.files)||void 0===a?void 0:a[0])||null)}),[u,$]);(0,l.useEffect)((()=>{p&&(u.current.click(),v(!1))}),[p,u,v]),(0,l.useEffect)((()=>{const e=m.current;return e?(e.addEventListener("dragenter",S),e.addEventListener("dragleave",M),e.addEventListener("dragover",c),e.addEventListener("drop",x),()=>{e.removeEventListener("dragenter",S),e.removeEventListener("dragleave",M),e.removeEventListener("dragover",c),e.removeEventListener("drop",x)}):()=>null}),[S,M,x,C]),(0,l.useEffect)((()=>{b(!1)}),[w]);const q=[s,h&&`${s}--dragging`,"field-type"].filter(Boolean).join(" ");return l.createElement("div",{className:q},l.createElement(i.Z,{showError:_,message:k}),N&&!y&&l.createElement(o.Z,{doc:w,collection:Z,handleRemove:()=>{b(!0),$(null)}}),(!N||y)&&l.createElement("div",{className:`${s}__upload`},C&&l.createElement("div",{className:`${s}__file-selected`},l.createElement("span",{className:`${s}__filename`},C.name),l.createElement(r.Z,{icon:"x",round:!0,buttonStyle:"icon-label",iconStyle:"with-border",onClick:()=>{$(null)}})),!C&&l.createElement(l.Fragment,null,l.createElement("div",{className:`${s}__drop-zone`,ref:m},l.createElement(r.Z,{size:"small",buttonStyle:"secondary",onClick:()=>v(!0)},"Select a file"),l.createElement("span",{className:`${s}__drag-label`},"or drag and drop a file here"))),l.createElement("input",{ref:u,type:"file",accept:null===(t=null===(a=null==Z?void 0:Z.upload)||void 0===a?void 0:a.mimeTypes)||void 0===t?void 0:t.join(","),onChange:T})))}},55976:(e,a)=>{a.Z=function(e,a=0){if(0===e)return"0 bytes";const t=a<0?0:a,l=Math.floor(Math.log(e)/Math.log(1024));return`${parseFloat((e/1024**l).toFixed(t))}${[" bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][l]}`}}}]);